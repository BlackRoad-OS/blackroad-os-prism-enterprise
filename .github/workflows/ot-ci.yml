name: OT Engine CI

on:
  push:
    paths:
      - 'packages/ot-engine/**'
      - 'packages/ot-gateway/**'
      - 'packages/blackroadctl/**'
      - 'docs/rfc/**'
      - 'docs/guides/**'
      - 'sites/blackroad/**'
      - '.github/workflows/ot-ci.yml'
  pull_request:
    paths:
      - 'packages/ot-engine/**'
      - 'packages/ot-gateway/**'
      - 'packages/blackroadctl/**'
      - 'docs/rfc/**'
      - 'docs/guides/**'
      - 'sites/blackroad/**'
      - '.github/workflows/ot-ci.yml'

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@08eba0b27e820071cde6df949e0beb9ba4906955 # v4
      - uses: actions/setup-node@b39b52d1213e96004bfcb1c61a8a6fa8ab84f3e8 # v4
        with:
          node-version: 18
      - name: Install dependencies
        run: npm install
      - name: Run OT engine tests
        run: |
          npm test -- --runTestsByPath \
            packages/ot-engine/tests/semidiscrete.conservation.spec.js \
            packages/ot-engine/tests/dynamic.flow.continuity.spec.js
